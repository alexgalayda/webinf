{% extends "base.html" %}

{% block head_js %}
<!--
<script type="text/javascript" src="{{ url_for('static', filename='js/map.js') }}"></script>
-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
	integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
	crossorigin="">
</script>
{% endblock %}

{% block head_style %}
<link rel="stylesheet" 
	href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" 
	integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
	crossorigin=""/>
<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/mainstyle.css') }}">
{% endblock %}

{% block content %}
<div id="full-size"></div>

<!--
<script>
	window.onload = function () {console.log('lol')}
</script>
-->
<script>
window.onload = function () {
	var map = L.map('full-size',{crs: L.CRS.Simple});
	var layer = L.tileLayer('http://{{TILE_HOST}}:{{TILE_PORT}}/tile/{{filename}}/{z}_{x}_{y}.png', {
		maxZoom: 10,
		maxNativeZoom: 6,
		maxBounds: [12817, 11172],
	}).addTo(map);

	map.setView([0.0,0.0], 6);
	$.ajax({
		type: "GET",
		url: '/label/{{filename}}',
		//data: JSON.stringify(dd),
		contentType: "application/json; charset=utf-8",
		dataType: "json",
		success: function(data){
			//console.log(data);
			data.forEach(function(e){
				new L.Polyline(e, {
					color: 'red',
					weight: 3,
					opacity: 1,
					smoothFactor: 1
				}) .addTo(map);
			});
		},
		error: function(errMsg) {
			//alert(errMsg);
		}
	});
};
</script>
{% endblock %}
